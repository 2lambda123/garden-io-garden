kind: Deploy
name: backend
description: Helm chart for the backend service
type: helm

dependencies: [ build.backend-image ]

spec:
  localMode:
    ports:
      - local: 8090
        remote: 8080
    # starts the local application
    command: [ "../backend-local/main" ]
    target:
      kind: Deployment
      name: backend
      containerName: backend

  values:
    image:
      repository: ${action.build.backend-image.outputs.deployment-image-name}
      tag: ${action.build.backend-image.version}
    ingress:
      enabled: true
      paths: [ "/hello-backend" ]
      hosts: [ "backend.${var.baseHostname}" ]
