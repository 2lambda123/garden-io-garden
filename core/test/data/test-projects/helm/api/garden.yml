kind: Deploy
name: api
description: The API backend for the voting UI
type: helm
spec:
  releaseName: api-release
  sync:
    paths:
      - containerPath: "/app"
  defaultTarget:
    kind: Deployment
    name: api-release
  values:
    image:
      repository: api-image
      tag: ${action.build.api-image.version}
    ingress:
      enabled: true
      paths: [/]
      hosts: [api.local.app.garden]

---

kind: Module
description: The API backend for the voting UI
type: helm
name: api-module
releaseName: api-release
devMode:
  sync:
  - target: /app
    mode: two-way
serviceResource:
  kind: Deployment
  containerModule: api-image
values:
  image:
    tag: ${modules.api-image.version}
  ingress:
    enabled: true
    paths: [/]
    hosts: [api.local.demo.garden]
